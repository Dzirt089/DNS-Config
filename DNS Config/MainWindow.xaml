<Window x:Class="DNS_Config.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DNS_Config"
        Title="DNS Config" Height="480" Width="540"
        Background="#FF1E1E1E" Foreground="White"
        FontFamily="Segoe UI">

	<Window.Resources>
		<!-- Цвета -->
		<SolidColorBrush x:Key="Bg" Color="#FF1E1E1E"/>
		<SolidColorBrush x:Key="Fg" Color="#FFFFFFFF"/>
		<SolidColorBrush x:Key="ControlBg" Color="#FF2D2D2D"/>
		<SolidColorBrush x:Key="ControlBorder" Color="#FF444444"/>
		<SolidColorBrush x:Key="Accent" Color="#FF007ACC"/>
		<SolidColorBrush x:Key="StatusBg" Color="#FF252525"/>
		<SolidColorBrush x:Key="StatusText" Color="#FF00FF00"/>

		<!-- Анимация Spinner -->
		<Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
			<DoubleAnimation 
				Storyboard.TargetName="SpinnerRotateTransform"
				Storyboard.TargetProperty="Angle"
				From="0" To="360" Duration="0:0:1"/>
		</Storyboard>
	</Window.Resources>

	<Grid Margin="25" Background="{StaticResource Bg}">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Заголовки + Иконки -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
			<Image Source="pack://application:,,,/Icons/network.png" Width="22" Height="22" Margin="0,0,10,0"/>
			<TextBlock Text="Интерфейс" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource Fg}"/>
		</StackPanel>

		<ComboBox x:Name="InterfaceComboBox" Grid.Row="1" Height="36" Margin="0,0,0,20"
                  Padding="10,0" FontSize="13" SelectedIndex="0"/>

		<StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,12">
			<Image Source="pack://application:,,,/Icons/lock.png" Width="22" Height="22" Margin="0,0,10,0"/>
			<TextBlock Text="DoH-провайдер" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource Fg}"/>
		</StackPanel>

		<ComboBox x:Name="DohProviderComboBox" Grid.Row="3" Height="36" Margin="0,0,0,25"
                  ItemsSource="{Binding Source={x:Static local:DnsManager.DohProviders}}"
                  DisplayMemberPath="Key" SelectedValuePath="Value" Padding="10,0"
                  FontSize="13" SelectedIndex="3"/>

		<!-- Кнопки -->
		<StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10">
			<Button x:Name="SetButton" Content="Установить" Width="160" Height="40" Margin="0,0,12,0"
                    Click="SetCustomDnsButton_Click" Background="{StaticResource Accent}"
                    Foreground="White" BorderThickness="0" FontWeight="Medium" Cursor="Hand">
				<Button.Template>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}" CornerRadius="6">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter Property="Background" Value="#FF1080DD"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Button.Template>
				<Button.ContentTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<Image x:Name="CheckIcon" Source="pack://application:,,,/Icons/check.png" Width="18" Height="18" Margin="0,0,8,0"/>
							<TextBlock Text="{Binding}" VerticalAlignment="Center"/>
						</StackPanel>
					</DataTemplate>
				</Button.ContentTemplate>
			</Button>

			<Button Content="Сброс" Width="100" Height="40" Margin="0,0,12,0"
                    Click="SetDefaultDnsButton_Click"
                    Background="{StaticResource ControlBg}" Foreground="{StaticResource Fg}"
                    BorderBrush="{StaticResource ControlBorder}" BorderThickness="1">
				<Button.ContentTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<Image Source="pack://application:,,,/Icons/refresh.png" Width="16" Height="16" Margin="0,0,8,0"/>
							<TextBlock Text="{Binding}"/>
						</StackPanel>
					</DataTemplate>
				</Button.ContentTemplate>
			</Button>

			<Button Content="Проверить" Width="100" Height="40"
                    Click="CheckDnsButton_Click"
                    Background="{StaticResource ControlBg}" Foreground="{StaticResource Fg}"
                    BorderBrush="{StaticResource ControlBorder}" BorderThickness="1">
				<Button.ContentTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<Image Source="pack://application:,,,/Icons/search.png" Width="16" Height="16" Margin="0,0,8,0"/>
							<TextBlock Text="{Binding}"/>
						</StackPanel>
					</DataTemplate>
				</Button.ContentTemplate>
			</Button>
		</StackPanel>

		<!-- Spinner (скрыт по умолчанию) -->
		<Grid x:Name="SpinnerOverlay" Grid.RowSpan="6" Background="#AA000000" Visibility="Collapsed">
			<Border Background="#FF2D2D2D" CornerRadius="12" Width="120" Height="120"
            HorizontalAlignment="Center" VerticalAlignment="Center">
				<Grid>
					<Ellipse Width="60" Height="60" Stroke="{StaticResource Accent}" StrokeThickness="6"/>
					<Path Fill="{StaticResource Accent}" 
                  Data="M 0,-25 A 25,25 0 1,1 0,25" 
                  RenderTransformOrigin="0.5,0.5">
						<Path.RenderTransform>
							<RotateTransform x:Name="SpinnerRotateTransform" Angle="0"/>
						</Path.RenderTransform>
					</Path>
					<TextBlock Text="..." FontSize="24" Foreground="{StaticResource Fg}"
                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,30,0,0"/>
				</Grid>
			</Border>
		</Grid>

		<!-- Статус -->
		<Border Grid.Row="5" Margin="0,30,0,0" Background="{StaticResource StatusBg}"
                BorderBrush="{StaticResource ControlBorder}" BorderThickness="1" CornerRadius="8" Padding="14">
			<ScrollViewer VerticalScrollBarVisibility="Auto">
				<TextBox x:Name="StatusText" 
                         TextWrapping="Wrap" IsReadOnly="True" 
                         Background="Transparent" Foreground="{StaticResource StatusText}"
                         FontFamily="Consolas" FontSize="11.5" BorderThickness="0"/>
			</ScrollViewer>
		</Border>
	</Grid>
</Window>